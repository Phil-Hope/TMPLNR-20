<app-header [pageTitle]="['Edit Shift']"></app-header>

<ion-content>

  <ng-template #loading>
    <ion-card style="padding: 3rem; margin-top: 4rem">
      <ion-card-header><ion-title>Loading..</ion-title></ion-card-header>
      <ion-card-content><ion-col class="ion-text-center"><ion-spinner></ion-spinner></ion-col></ion-card-content>
    </ion-card>
  </ng-template>

  <ion-card style="margin-top: 2rem;" *ngIf="shift else loading">
    <ion-card-header>
      <ion-card-title class="ion-text-center" style="font-family: Quicksand, sans-serif">Edit Shift</ion-card-title>
    </ion-card-header>
    <form [formGroup]="form" (ngSubmit)="editShift()" >
      <ion-item-divider>

        <ion-item>
          <ion-label position="floating" class="ion-text-center" style="font-size: 0.8rem;" color="secondary"><span>Select Start Time</span></ion-label>
          <ion-datetime
            style="font-size: 0.8rem;"
            picker-format="DD MMM YY h:mm A"
            formControlName="start"
            display-format="DD MMM YY h:mm A"
            minuteValues="00,15,30,45"
            value="{{shift.start}}"
          >
          </ion-datetime>
        </ion-item>

        <ion-item>
          <ion-label position="floating" class="ion-text-center" style="font-size: 0.8rem;"  color="secondary"><span>Select Finish Time</span></ion-label>
          <ion-datetime
            style="font-size: 0.8rem;"
            picker-format="DD MMM YY h:mm A"
            formControlName="end"
            display-format="DD MMM YY h:mm A"
            minuteValues="00,15,30,45"
            value="{{shift.end}}"
          >
          </ion-datetime>
        </ion-item>

      </ion-item-divider>
      <ion-item-group>
          <ion-item-divider>
            <ion-item>
              <ion-label position="floating" color="secondary">On Duty</ion-label>
              <ion-select formControlName="onDuty" placeholder="Select User">
                <ng-template #loadUsers>
                  <ion-select-option>Error.. No users found</ion-select-option>
                </ng-template>
                <div *ngIf="users else loadUsers" >
                  <ion-select-option *ngFor="let user of users | async" value="/users/{{this.user.id}}}">
                    {{this.user.firstName}} {{this.user.lastName}}
                  </ion-select-option>
                </div>
              </ion-select>
            </ion-item>

            <ion-item>
              <ion-label position="floating" color="secondary">Call Level</ion-label>
              <ion-select formControlName="ShiftStatus" placeholder="Select Status">
                <ion-select-option value="secondary">Secondary</ion-select-option>
                <ion-select-option value="primary">Primary</ion-select-option>
              </ion-select>
            </ion-item>
          </ion-item-divider>
            <ion-item>
              <ion-checkbox slot="start" value="true"></ion-checkbox>
              <ion-label color="secondary">Shift Approved</ion-label>
            </ion-item>
      </ion-item-group>
      <ion-col size="12">
        <ion-item>
          <ion-button type="submit">Edit Shift</ion-button>
        </ion-item>
      </ion-col>
    </form>
  </ion-card>

</ion-content>

<ion-tabs>
  <ion-tab-bar slot="bottom">
    <ion-tab-button class="ion-activatable ripple-parent">
      <ion-icon size="large" color="primary" name="add-circle-outline"></ion-icon>
      <ion-label>Add Shift</ion-label>
    </ion-tab-button>

    <ion-tab-button [routerLink]="['../calendar']" class="ion-activatable ripple-parent">
      <ion-icon size="small"  name="calendar-outline"></ion-icon>
      <ion-label>Calendar</ion-label>
    </ion-tab-button>

    <ion-tab-button [routerLink]="['../../shifts']" class="ion-activatable ripple-parent">
      <ion-icon size="small" name="search-circle-outline"></ion-icon>
      <ion-label>View All</ion-label>
    </ion-tab-button>

  </ion-tab-bar>
</ion-tabs>




